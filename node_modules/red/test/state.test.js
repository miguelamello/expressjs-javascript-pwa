const { describe, it } = require('mocha');
const assume = require('assume');

describe('red/state', function () {
  const red = require('red/state');
  const state = red.state;

  before(function () {
    state.increment = 0;
    state.assignment = 0;
  });

  it('benchmark', function () {
    for (let i = 0; i < 100000; i++) {
      state.increment++;
      state.assignment = i;

      red.getSnapshot();
    }

    const snap = red.getSnapshot();
    assume(snap).is.a('object');
    assume(snap.increment).equals(100000);
    assume(snap.assignment).equals(99999);
  });
});
